<UserControl x:Class="MyTradingApp.Views.OrdersView"
             Name="ordersControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:vms="clr-namespace:MyTradingApp.ViewModels"
             xmlns:exceed="http://schemas.xceed.com/wpf/xaml/toolkit"
             mc:Ignorable="d" 
             d:DesignHeight="310" d:DesignWidth="1000"   
             d:DataContext ="{d:DesignInstance {x:Type vms:OrdersViewModel}, IsDesignTimeCreatable=True}"
             >

    <StackPanel>
        <ListView ItemsSource="{Binding Orders}">
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="Focusable" Value="false"/>
                    <Setter Property="Height" Value="40" />
                    <Style.Triggers>
                        <!-- Hide selection -->
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="{x:Null}" />
                            <Setter Property="BorderBrush" Value="{x:Null}" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{x:Null}" />
                            <Setter Property="BorderBrush" Value="{x:Null}" />
                        </Trigger>
                    
                    
                        <DataTrigger Binding="{Binding Status}" Value="Submitted" >
                            <Setter Property="Background" Value="LightGreen" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Status}" Value="Filled" >
                            <Setter Property="Background" Value="Green" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Status}" Value="Error" >
                            <Setter Property="Background" Value="OrangeRed" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ListView.ItemContainerStyle>
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Symbol" Width="75">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding Symbol.Code}" MaxLength="6" Padding="6,2" Width="60" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Exchange" Width="75" >
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <ComboBox Padding="6,2" SelectedItem="{Binding Symbol.Exchange}" 
                                          ItemsSource="{Binding DataContext.ExchangeList, RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Find" Padding="6,2" 
                                        Command="{Binding DataContext.FindCommand, RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}}"
                                        CommandParameter="{Binding}"
                                        />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Name" Width="200" DisplayMemberBinding="{Binding Symbol.Name}" />

                    <GridViewColumn Header="Direction" Width="65" >
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <ComboBox SelectedItem="{Binding Direction}" 
                                          ItemsSource="{Binding Path=DataContext.DirectionList, RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Qty" Width="75">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <exceed:IntegerUpDown Value="{Binding Quantity}" Width="60" MaxLength="5" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Entry Price" Width="85">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <exceed:DecimalUpDown Value="{Binding EntryPrice}" Increment="{Binding PriceIncrement}"  Width="70" MaxLength="5" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Inital Stop Loss" Width="85">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <exceed:DecimalUpDown Value="{Binding InitialStopLossPrice}" Increment="{Binding PriceIncrement}" Width="70" MaxLength="5"  />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    
                    <GridViewColumn Width="70">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Submit"
                                        Command="{Binding DataContext.SubmitCommand, RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}}"
                                        CommandParameter="{Binding}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Status" Width="120" DisplayMemberBinding="{Binding Status}" />

                    <GridViewColumn Width="70">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Delete"
                                        Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}}"
                                        CommandParameter="{Binding}"
                                        />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>                
                </GridView>
            </ListView.View>
        </ListView>

        <Button Content="Add" Command="{Binding AddCommand}" Width="80" HorizontalAlignment="Left" Margin="0,20" />
    </StackPanel>

</UserControl>
