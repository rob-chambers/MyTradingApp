<UserControl x:Class="MyTradingApp.Views.OrdersView"
             Name="ordersControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:vms="clr-namespace:MyTradingApp.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="310" d:DesignWidth="1000"   
             d:DataContext ="{d:DesignInstance {x:Type vms:OrdersViewModel}, IsDesignTimeCreatable=True}"
             >

    <StackPanel>
        <ListView ItemsSource="{Binding Orders}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Symbol" Width="70">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding Symbol.Code}" MaxLength="6" Padding="6,2" Width="50" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Exchange" Width="75" >
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <ComboBox Padding="6,2" SelectedItem="{Binding Symbol.Exchange}" 
                                          ItemsSource="{Binding DataContext.ExchangeList, RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Find" Padding="6,2" 
                                        Command="{Binding DataContext.FindCommand, RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}}"
                                        CommandParameter="{Binding}"
                                        />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Name" Width="200" DisplayMemberBinding="{Binding Symbol.Name}" />

                    <GridViewColumn Header="Direction" Width="65" >
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <ComboBox Padding="6,2" SelectedItem="{Binding Direction}" 
                                          ItemsSource="{Binding Path=DataContext.DirectionList, RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Qty" Width="60" DisplayMemberBinding="{Binding Quantity}" />
                    <GridViewColumn Header="Entry Price" Width="90" DisplayMemberBinding="{Binding EntryPrice}" />
                    <GridViewColumn Header="Inital Stop Loss" Width="110" DisplayMemberBinding="{Binding InitialStopLossPrice}" />
                    
                    <GridViewColumn Width="70">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Submit" Padding="6,2"
                                        Command="{Binding DataContext.SubmitCommand, RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}}"
                                        CommandParameter="{Binding}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Status" Width="120" DisplayMemberBinding="{Binding Status}" />

                    <GridViewColumn Width="70">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Delete" Padding="6,2"
                                        Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType=UserControl, Mode=FindAncestor}}"
                                        CommandParameter="{Binding}"
                                        />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>                
                </GridView>
            </ListView.View>
        </ListView>

        <Button Content="Add" Command="{Binding AddCommand}" Width="100" HorizontalAlignment="Left" Margin="0,10" Padding="8,4" />
    </StackPanel>

</UserControl>
